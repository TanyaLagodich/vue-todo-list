(function(){"use strict";var t={8568:function(t,e,s){var a=s(8935),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"todo-app"},[s("h1",{staticClass:"todo-app__title"},[t._v(" todo list ")]),s("adding-task",{on:{"add-task":t.addTask}}),s("tasks-list",{attrs:{tasks:t.tasks},on:{"sort-tasks":t.sortTasks,"save-task":t.saveTask,"delete-task":t.deleteTask}})],1)},r=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"todo-app__adding"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.taskText,expression:"taskText"}],staticClass:"todo-app__input",attrs:{type:"text",placeholder:"Вынести мусор"},domProps:{value:t.taskText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTask.apply(null,arguments)},input:function(e){e.target.composing||(t.taskText=e.target.value)}}}),s("button",{staticClass:"todo-app__btn",attrs:{disabled:!t.taskText,title:t.taskText&&"Добавить"},on:{click:t.addTask}})])},o=[],d={data(){return{taskText:""}},methods:{addTask(){if(!this.taskText)return;const t={id:Math.random().toString(36).substr(2,9),text:this.taskText,cheked:!1};this.$emit("add-task",t),this.taskText=""}}},l=d,c=s(1001),u=(0,c.Z)(l,i,o,!1,null,"56c762f6",null),k=u.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"todo-app__list"},t._l(t.tasks,(function(e,a){return s("li",{key:e.id,staticClass:"todo-app__item todo-app__item_draggable",class:{"todo-app__item_opacity":a===t.dragElementIndex},attrs:{draggable:"","data-index":a},on:{dragstart:function(e){t.dragElementIndex=a},dragend:function(e){t.dragElementIndex=""},dragover:function(e){return e.preventDefault(),t.dragOver.apply(null,arguments)},drop:function(e){return t.dragDrop(a)}}},[s("task-single",{attrs:{task:e},on:{"save-task":function(e){return t.$emit("save-task",{task:e,index:a})},"delete-task":function(e){return t.$emit("delete-task",a)}}})],1)})),0)},g=[],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task"},[t.editingTask?s("div",{staticClass:"task__input-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.taskCopy.text,expression:"taskCopy.text"}],staticClass:"task__edit-input",attrs:{type:"text"},domProps:{value:t.taskCopy.text},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveTask.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEditing.apply(null,arguments)}],input:function(e){e.target.composing||t.$set(t.taskCopy,"text",e.target.value)}}})]):s("div",{staticClass:"task__input-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.taskCopy.checked,expression:"taskCopy.checked"}],attrs:{type:"checkbox",id:t.taskCopy.id},domProps:{checked:Array.isArray(t.taskCopy.checked)?t._i(t.taskCopy.checked,null)>-1:t.taskCopy.checked},on:{change:[function(e){var s=t.taskCopy.checked,a=e.target,n=!!a.checked;if(Array.isArray(s)){var r=null,i=t._i(s,r);a.checked?i<0&&t.$set(t.taskCopy,"checked",s.concat([r])):i>-1&&t.$set(t.taskCopy,"checked",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.taskCopy,"checked",n)},t.saveTask]}}),s("label",{attrs:{for:t.taskCopy.id}},[s("span",[t._v(" "+t._s(t.taskCopy.text)+" ")])])]),s("div",[t.editingTask&&!t.taskCopy.checked?s("button",{staticClass:"task__button task__button_saving",on:{click:t.saveTask}}):t.taskCopy.checked?t._e():s("button",{staticClass:"task__button task__button_editing",on:{click:function(e){t.editingTask=!0}}}),s("button",{staticClass:"task__button task__button_deleting",on:{click:function(e){return t.$emit("delete-task")}}})])])},f=[],m={props:{task:{type:Object,required:!0}},data(){return{taskCopy:{},editingTask:!1}},created(){this.taskCopy=Object.assign({},this.$props.task)},methods:{saveTask(){this.editingTask=!1,this.$emit("save-task",this.taskCopy)},cancelEditing(){this.editingTask=!1,this.taskCopy.text=this.$props.task.text}}},v=m,x=(0,c.Z)(v,h,f,!1,null,"5ef0d93d",null),y=x.exports,_={components:{TaskSingle:y},props:{tasks:{type:Array,required:!0}},data(){return{dragElementIndex:"",dragEnterElementIndex:""}},methods:{dragOver(t){const e=t.target.closest("li"),s=Number(e.dataset.index),a=this.dragElementIndex!==s;if(!a)return;const n=this.$el.querySelector(`[data-index="${this.dragElementIndex}"]`),r=this.getNextElement(t.clientY,e);r&&n===r.previousElementSibling||n===r||(this.dragEnterElementIndex=s)},dragDrop(){!this.dragEnterElementIndex&&0!==this.dragEnterElementIndex||this.dragElementIndex===this.dragEnterElementIndex||this.$emit("sort-tasks",{draggableIndex:this.dragElementIndex,newIndex:this.dragEnterElementIndex}),this.dragEnterElementIndex="",this.dragElementIndex=""},getNextElement(t,e){const s=e.getBoundingClientRect(),a=s.y+s.height/2,n=t<a?e:e.nextElementSibling;return n}}},C=_,E=(0,c.Z)(C,p,g,!1,null,"c4dc599a",null),b=E.exports,T={components:{AddingTask:k,TasksList:b},data(){return{tasks:[]}},created(){localStorage.getItem("tasks")&&(this.tasks=JSON.parse(localStorage.getItem("tasks")))},methods:{sortTasks({draggableIndex:t,newIndex:e}){const s=this.tasks[t],a=this.tasks[e];console.log({draggableIndex:t,draggableElem:s,newIndex:e,enterDragElem:a}),this.$set(this.tasks,t,a),this.$set(this.tasks,e,s),console.log(this.tasks),this.updateLocalStorage()},addTask(t){this.tasks.push(t),this.updateLocalStorage()},saveTask({task:t,index:e}){this.tasks[e]=t,this.updateLocalStorage()},deleteTask(t){this.tasks.splice(t,1),this.updateLocalStorage()},updateLocalStorage(){localStorage.setItem("tasks",JSON.stringify(this.tasks))}}},I=T,$=(0,c.Z)(I,n,r,!1,null,null,null),O=$.exports;a.Z.config.productionTip=!1,new a.Z({render:t=>t(O)}).$mount("#app")}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,r){if(!a){var i=1/0;for(c=0;c<t.length;c++){a=t[c][0],n=t[c][1],r=t[c][2];for(var o=!0,d=0;d<a.length;d++)(!1&r||i>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[d])}))?a.splice(d--,1):(o=!1,r<i&&(i=r));if(o){t.splice(c--,1);var l=n();void 0!==l&&(e=l)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[a,n,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,r,i=a[0],o=a[1],d=a[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(d)var c=d(s)}for(e&&e(a);l<i.length;l++)r=i[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(c)},a=self["webpackChunkvue_todo_list"]=self["webpackChunkvue_todo_list"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(8568)}));a=s.O(a)})();
//# sourceMappingURL=app.a0552198.js.map